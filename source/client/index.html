<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recipe App</title>

  <!-- Web Components -->
  <script src="assets/components/RecipeCard.js" type="module"></script>
  <script src="assets/components/ExpandRecipe.js" type="module"></script>

  <!-- Service Worker
  <script src="sw.js" type="module"></script> -->

  <!-- Router -->
  <script src="assets/scripts/Router.js" type="module"></script>
  <script src="assets/scripts/navigate.js" type="module"></script>

  <!-- Main Stylesheet & Scripts -->
  <link rel="stylesheet" href="assets/styles/main.css" />
  <script type="module" src="../client/assets/scripts/RecipeCardCreate.js"></script>
  <script type="text/javascript" src="../client/assets/scripts/main.js"></script>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" />

</head>

<body>
  <main>
    <section class="section--recipe-cards shown">
      <nav class="navbar navbar-light bg-dark">
        <span class="navbar-brand mb-0 h1 text-white">Navbar</span>
        <div class="navbar-nav mx-auto d-flex flex-row">
          <button id="my-recipes-btn" class="nav-item btn btn-light mr-3">
            My Recipes
          </button>
          <button id="explore-btn" class="nav-item btn btn-dark">
            Explore
          </button>
        </div>
      </nav>

      <section class="recipe-cards--wrapper shown">
        My recipes
        <div id="recipe-cards">
          <!-- Recipes Added Here -->
        </div>
      </section>

      <section class="section--recipe-expand">
        <recipe-expand></recipe-expand>
      </section>

      <section class="explore container-fluid">
        <div class="row visible-xs-*">
          <div class="col xs0"></div>
          <div class="col xs1"></div>
        </div>
        <div class="row visible-sm-*">
          <div class="col sm0"></div>
          <div class="col sm1"></div>
          <div class="col sm2"></div>
        </div>
        <div class="row hidden-xs hidden-sm" style="height: 300px">
          <div class="col lg0"></div>
          <div class="col lg1"></div>
          <div class="col lg2"></div>
          <div class="col lg3"></div>
        </div>
      </section>

      <!-- CREATE RECIPE PAGE -->
      <section class="section--create-recipe">
        <div id="create-recipe--input-wrapper">

          <!-- FIRST COLUMN -->
          <div class="input-wrapper--column">
            <div class="input-card" id="img-card">
              <label for="input-img" class="custom-file-upload">
                <img id="display-image"
                  src="https://www.pngkit.com/png/full/129-1298005_png-file-upload-image-icon-png.png" />
              </label>

              <script>
                // Get image to preview it 
                function handleImageUpload() {
                  let image = document.getElementById('input-img').files[0]
                  let fileReader = new FileReader()
                  fileReader.onload = function (e) {
                    document.getElementById('display-image').src = e.target.result
                    console.log(e.target.result)
                  }
                  if (image) {
                    fileReader.readAsDataURL(image)
                  }
                }
              </script>

              <input id="input-img" type="file" onchange="handleImageUpload()" style="display: none" />
            </div>

            <!-- Name -->
            <div class="input-card">
              <label for="input-name">Name</label><br>
              <input type="text" id="input-name" name="input-name">
            </div>

            <!-- Description -->
            <div class="input-card">
              <label for="input-desc">Description</label><br>
              <input type="text" id="input-desc" name="input-desc">
            </div>

            <!-- Time -->
            <div class="input-card">
              <label for="input-time">Time (in minutes)</label><br>
              <input type="number" id="input-time" name="input-time">
            </div>

            <!-- Tags -->
            <div class="input-card">
              <div id="tag-wrapper">
                <label for="input-tags">Tags</label><br>
                <input type="text" id="input-tags1" class="tags" name="input-tags1">

              </div>

              <script>
                // Keep track of number of ingredient inputs
                let tagCounter = 1;

                // Array to store tags to repopulate tags later
                let prevTags = []

                // Add label and new input
                function addNewTag() {

                  // Save prev tags in array
                  for (let i = 1; i <= tagCounter; i++) {
                    let value = document.getElementById(`input-tags${i}`).value
                    prevTags.push(value)
                  }

                  document.getElementById('tag-wrapper').innerHTML += `
                    <input type="text" id="input-tags${String(tagCounter + 1)}" class="tags" name="input-tags${String(tagCounter + 1)}">
                    `
                  tagCounter++
                  // After new tag has been created, repopulate previous tags
                  for (let i = 1; i <= tagCounter - 1; i++) {
                    document.getElementById(`input-tags${i}`).value = prevTags[i - 1]
                  }

                  // Empty array
                  while (prevTags.length > 0) {
                    prevTags.pop();
                  }

                }
              </script>
              <br>

              <!-- Create new tag input button-->
              <button class="add-btn" type="button" onclick="addNewTag()">+</button>
            </div>
          </div>

          <!-- SECOND COLUMN -->
          <div class="input-wrapper--column">
            <!-- Ingredients -->
            <div class="input-card" id="ing-card">
              <div id="ing-wrapper">
                <label>Ingredients</label><br><br>
                <label for="input-ings1">1.</label>
                <input type="text" id="input-ings1" class="ings" name="input-ings1">
              </div>

              <script>
                // Keep track of number of ingredient inputs
                let ingCounter = 1;

                // Array to store tags to repopulate tags later
                let prevIngs = []

                // Add label and new input
                function addNewIngredient() {

                  // Save prev tags in array
                  for (let i = 1; i <= ingCounter; i++) {
                    let value = document.getElementById(`input-ings${i}`).value
                    prevIngs.push(value)
                    console.log(prevIngs)
                  }

                  document.getElementById('ing-wrapper').innerHTML += `<div class="input-card-ings">
                    <label for="input-ings${String(ingCounter + 1)}">${String(ingCounter + 1)}.</label>
                    <input type="text" id="input-ings${String(ingCounter + 1)}"  class="ings" name="input-ings${String(ingCounter + 1)}">
                 </div>`

                  ingCounter++

                  // After new tag has been created, repopulate previous tags
                  for (let i = 1; i <= ingCounter - 1; i++) {
                    document.getElementById(`input-ings${i}`).value = prevIngs[i - 1]
                  }

                  // Empty array
                  while (prevIngs.length > 0) {
                    prevIngs.pop();
                  }
                }
              </script>

              <br>

              <!-- Create new ingredient button-->
              <button class="add-btn" type="button" onclick="addNewIngredient()">+</button>
            </div>
          </div>

          <!-- THIRD COLUMN -->
          <div class="input-wrapper--column">
            <div class="input-card" id="step-card">

              <div id="step-wrapper">
                <label>Steps</label><br>
                <div class="input-card-steps">
                  <label for="input-steps1">1.</label>
                  <input type="text" id="input-steps1" class="steps" name="input-steps1">
                </div>
              </div>
              <br><br>

              <script>
                // Keep track of number of step inputs
                let stepCounter = 1;

                // Array to store tags to repopulate tags later
                let prevSteps = []

                // Add label and new input
                function addNewStep() {

                  // Save prev tags in array
                  for (let i = 1; i <= stepCounter; i++) {
                    let value = document.getElementById(`input-steps${i}`).value
                    prevSteps.push(value)
                    console.log(prevSteps)
                  }

                  document.getElementById('step-wrapper').innerHTML += `<div class="input-card-steps">
                    <label for="input-steps${String(stepCounter + 1)}">${String(stepCounter + 1)}.</label>
                    <input type="text" id="input-steps${String(stepCounter + 1)}" class="steps" name="input-steps${String(stepCounter + 1)}">
                    </div>`

                  stepCounter++
                  // After new tag has been created, repopulate previous tags
                  for (let i = 1; i <= stepCounter - 1; i++) {
                    document.getElementById(`input-steps${i}`).value = prevSteps[i - 1]
                  }

                  // Empty array
                  while (prevSteps.length > 0) {
                    prevSteps.pop();
                  }

                }

              </script>

              <!-- Create new step button-->
              <button class="add-btn" type="button" onclick="addNewStep()">+</button>
              <p style="text-align: center; color: #C4C4C4;">Click to add steps</span>
            </div>

            <!-- Save Button -->
            <button class="save-btn">Save Recipe</button>

          </div>

        </div>





        <!--TODO: create recipe page -->
        <!--
        <div id="create-recipe-image" class="create-rep-1">
          <label for="upload" class="custom-file-upload">
            <img id="display-image"
              src="https://toppng.com/uploads/preview/file-upload-image-icon-115632290507ftgixivqp.png" />
          </label>
          <input id="upload" type="file" onChange="handleImageUpload()" />
          <script>
            function handleImageUpload() {
              let image = document.getElementById("upload").files[0];
              let fileReader = new FileReader();
              fileReader.onload = function (e) {
                document.getElementById("display-image").src = e.target.result;
              }
              if (image) {
                fileReader.readAsDataURL(image);
              }
            }
          </script>
        </div>
        -->

        <!--
        <div id="create-recipe-name" class="create-rep-1">
          Name:
          <p class="create-recipe-para">
            This is a paragraph
          </p>
        </div>
        -->

        <!--
        <div id="create-recipe-desc" class="create-rep-1">
          Description:
          <p class="create-recipe-para">

          </p>
        </div>
        <div id="create-recipe-time" class="create-rep-1">
          Time:
          <p>

          </p>
        </div>
        <div id="create-recipe-ingred" class="create-rep-2">
          Ingredients:
          <p>

          </p>
        </div>
        -->
      </section>

      <button id="create-recipe-btn" class="show-create-button btn btn-primary"
        style="bottom: 10px; right: 10px; position: absolute">
        <i id="create-recipe-btn-plus" class="bi bi-plus-lg"></i>


      </button>
    </section>
  </main>

</body>

</html>