<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recipe App</title>

  <!-- Web Components -->
  <script src="assets/components/cook-mode.js" type="module"></script>
  <script src="assets/components/recipe-card.js" type="module"></script>
  <script src="assets/components/expand-recipe.js" type="module"></script>

  <!-- Service Worker
  <script src="sw.js" type="module"></script> -->

  <!-- Router 
  <script src="assets/scripts/Router.js" type="module"></script> -->

  <!-- Main Stylesheet & Scripts -->
  <link rel="stylesheet" href="assets/styles/main.css" />
  <script type="module" src="assets/scripts/recipe-card-create.js"></script>
  <!--<script type="text/javascript" src="../client/assets/scripts/main.js"></script>-->
  <script src="assets/scripts/navigate.js" type="module"></script>
  <script src="assets/scripts/create-edit-recipe.js" type="module"></script>
  <script src="assets/scripts/searchbar.js"></script>

  <!-- Bootstrap -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
    integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous" />
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css" />
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
    crossorigin="anonymous"></script>

</head>

<body>
  <main>
    <!-- HOME PAGE -->
    <section class="section--recipe-cards shown">
      <nav class="navbar navbar-light bg-dark">
        <span class="navbar-brand mb-0 h1 text-white">Recipe Manager</span>
        <div class="navbar-nav d-flex flex-row">
          <button id="my-recipes-btn" class="nav-item btn btn-white">
            My Recipes
          </button>
          <button id="my-fav-btn" class="nav-item btn btn-dark">
            Favorites
          </button>
          <button id="explore-btn" class="nav-item btn btn-dark">
            Explore
          </button>
        </div>
      </nav>

      <!-- RECIPE CARDS -->
      <section class="recipe-cards--wrapper shown">
        <script>
          window.onload = function () {
            if (window.localStorage.length == 0) {
              alert("It looks like you don't have any recipes saved. Create a new recipe by clicking the plus button!");
            }
          };
        </script>

        <!--Search bar and filter-->
        <div class="d-flex flex-row" style="margin: 10px auto; width: 30%;">
          <input type="text" id="search-bar" class="form-control" onkeyup="searchRecipe()"
            placeholder="Search by recipe name..." />
          <div class="accordion-item ml-3">
            <button id="filter-btn" class="btn btn-light accordion-button collapsed" style="border-radius: 20px;"
              type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false"
              aria-controls="collapseThree" onclick="showTags()">
              <i class="bi bi-funnel-fill"></i>
            </button>
            <!--
            <div id="collapseThree" class="accordion-collapse collapse border border-2 mt-2">
              <div id="existingTags" class="accordion-body"></div>
            -->

          </div>
        </div>
        </div>

        <!-- DISPLAY TAGS -->
        <div id="tag-wrapper-filter"></div>

        <div id="recipe-cards">
          <!-- Recipes Added Here -->
        </div>
      </section>

      <!-- COOK MODE PAGE -->
      <section class="section--cook-mode">
        <cook-mode></cook-mode>
      </section>

      <!-- EXPAND RECIPES PAGE-->
      <section class="section--recipe-expand">
        <recipe-expand></recipe-expand>
      </section>

      <!-- FAVORITES PAGE -->

      <!-- EXPLORE RECIPES PAGE -->
      <section class="explore container-fluid">
        <div id="explore-wrapper">
          <div id="card-wrapper">
          </div>
        </div>
        <div id="explore-buttons">
          <button id="show-more-btn">Show More</button>
          <button id="refresh-btn">Refresh</button>
        </div>
      </section>

      <!-- CREATE RECIPE PAGE -->
      <section class="section--create-recipe">
        <div id="create-recipe--input-wrapper">

          <!-- FIRST COLUMN -->
          <div class="input-wrapper--column">
            <div class="input-card" id="img-card">
              <label for="input-img" class="custom-file-upload">
                <img id="display-image"
                  src="https://www.pngkit.com/png/full/129-1298005_png-file-upload-image-icon-png.png" />
              </label>

              <input id="input-img" type="file" style="display: none" />
            </div>

            <!-- Name -->
            <div class="input-card">
              <label for="input-name">Name</label>
              <input type="text" id="input-name" name="input-name">
            </div>

            <!-- Description -->
            <div class="input-card">
              <label for="input-desc">Description</label>
              <textarea id="input-desc" name="input-desc" rows="5" cols="33"></textarea>
            </div>

            <!-- Nutrition -->
            <div class="input-card">
              <label for="nutrition-facts">Nutrition Information</label><br>
              <label for="input-calories">Calories</label>
              <input type="number" id="input-calories" name="input-calories" class="nutrition-cat"><br>
              <label for="input-carbs">Carbohydrates(g)</label>
              <input type="number" id="input-carbs" name="input-carbs" class="nutrition-cat"><br>
              <label for="input-fat">Fat(g)</label>
              <input type="number" id="input-fat" name="input-fat" class="nutrition-cat"><br>
              <label for="input-protein">Protein(g)</label>
              <input type="number" id="input-protein" name="input-protein" class="nutrition-cat">
            </div>

            <!-- Time -->
            <div class="input-card">
              <label for="input-time">Time</label>
              <div id="time-inputs">
                <label for="input-hours">Hour:</label>
                <input type="number" class="input-hours-mins" id="input-hours" name="input-hours">
                <label for="input-minutes">Minute:</label>
                <input type="number" class="input-hours-mins" id="input-mins" name="input-mins">
              </div>

            </div>

            <!-- Tags -->
            <div class="input-card">
              <label for="input-tags">Tags</label>
              <div id="tag-wrapper">
              </div>
              <br>

              <!-- Create new tag input button-->
              <button class="add-btn tag-btn" type="button">+</button>
              <p style="text-align: center; color: #C4C4C4; font-size: 1vw;">Click to add tags</span>
            </div>
          </div>

          <!-- SECOND COLUMN -->
          <div class="input-wrapper--column">
            <!-- Ingredients -->
            <div class="input-card" id="ing-card">
              <label>Ingredients</label><br>
              <div id="ing-wrapper">

              </div>

              <br>

              <!-- Create new ingredient button-->
              <button class="add-btn ing-btn" type="button">+</button>
              <p style="text-align: center; color: #C4C4C4; font-size: 1.5vw;">Click to add ingredients</span>
            </div>
          </div>

          <!-- THIRD COLUMN -->
          <div class="input-wrapper--column">
            <div class="input-card" id="step-card">
              <label>Steps</label>
              <div id="step-wrapper">
              </div>
              <br><br>

              <!-- Create new step button-->
              <button class="add-btn step-btn" type="button">+</button>
              <p style="text-align: center; color: #C4C4C4; font-size: 1.8vw;">Click to add steps</span>
            </div>

            <!-- Save Button for Create Recipe -->
            <button id="save-create-btn" class="save-btn-create btn btn-light"
              style="bottom: 10px; right: 10px; position: fixed; border-radius: 20px; display: none;">
              <i class="bi bi-check-lg"></i>
            </button>

            <!-- Save Button for Edit Recipe -->
            <button id="save-edit-btn" class="save-btn-edit btn btn-light"
              style="bottom: 10px; right: 10px; position: fixed; border-radius: 20px; display: none;">
              <i class="bi bi-check-lg"></i>
            </button>

          </div>
        </div>
      </section>

      <button id="create-recipe-btn" class="btn btn-light"
        style="bottom: 20px; right: 15px; position: fixed; border-radius: 20px;">
        <i id="create-recipe-btn-plus" class="bi bi-plus-lg"></i>
      </button>
      <button id="return-btn" class="hidden" style="top: 66px; left: 10px; position: absolute; border-radius: 20px;"
        onclick="returnToHomePage()">
        <i class="bi bi-arrow-return-left"></i>
      </button>
      <button id="delete-btn" class="btn btn-light"
        style="bottom: 90px; right: 15px; position: fixed; border-radius: 20px;" onclick="showDeleteButtons()">
        <i id="delbut-icon" class="bi bi-trash"></i>
      </button>
      <button id="cook-mode-btn" class="hidden"
        style="bottom: 160px; right: 15px; position: fixed; border-radius: 20px;">
        <i id="cook-mode-icon" class="bi bi-play"></i>
      </button>

      <div class="delete-modal-expand hidden">
        <div class="card delete-modal-expand-content" style="width: 18rem;">
          <div class="card-body">
            <h5 class="card-title">Are you sure you want to delete this recipe?</h5>
            <button id="modal-close" class="btn btn-secondary" onclick="cancelDelete()">Close</button>
            <button id="modal-delete" class="btn btn-primary" onclick="confirmDelete()">Delete</button>
          </div>
        </div>
      </div>

      <button id="edit-btn" class="btn btn-light"
        style="bottom: 20px; right: 15px; position: fixed; display: none; border-radius: 20px;">
        <i class="bi bi-pencil-square"></i>
      </button>

      <script type="module">
        import { navEdit } from "./assets/scripts/create-edit-recipe.js";

        document.getElementById('edit-btn').onclick = function () {
          navEdit('Edit Recipe');
        }
      </script>
    </section>
  </main>

</body>

</html>